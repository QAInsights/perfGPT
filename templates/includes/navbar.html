<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
        <a class="navbar-brand" href="/"  aria-current="page">ðŸ¤– PerfGPT</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                {% if auth['upload_status'] == 1 %}
                <li class="nav-item">
                    <a class="nav-link active" href="/upload">Upload</a>
                </li>
                {% endif %}
                <li class="nav-item">
                    <a class="nav-link active" href="/about">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="/features">Features</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="/help">Help</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="https://github.com/QAInsights/perfGPT/issues/new" target="_blank">Feedback</a>
                </li>
            </ul>
            <ul class="navbar-nav">
                <li class="nav-item me-3 mt-2">
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="darkModeSwitch" role="switch" >
                    <label class="form-check-label" for="darkModeSwitch">
                      <i class="fas fa-moon moon-icon" style="display: none;"></i>
                      <i class="fas fa-sun sun-icon" style="display: block;"></i>
                    </label>
                  </div>
                </li>

                <li class="nav-item me-3 mt-2">
                    <a class="github-button" href="https://github.com/qainsights/perfGPT" data-size="large" data-show-count="true">Star</a>
                </li>
                {% if auth['username'] != None %}
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle active" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">{{ auth['username'] }}</a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="/account">Account</a></li>
                    </ul>
                </li>
                {% endif %}
            </ul>
        </div>
    </div>
</nav>
<script language="JavaScript">
const storedTheme = localStorage.getItem('theme')
  if (storedTheme) {
    // set theme preference if it exists
    const html = document.querySelector('html')
    const checkbox = document.querySelector('#darkModeSwitch');

    html.setAttribute('data-bs-theme', storedTheme)
    $('body').addClass(storedTheme)

    if (storedTheme === 'dark') {
      $('.moon-icon').css('display', 'block')
      $('.sun-icon').css('display', 'none')
      console.log("dark")
      checkbox.style.backgroundColor = 'black';
    } else {
      $('.moon-icon').css('display', 'none')
      $('.sun-icon').css('display', 'block')
      console.log("light")
      checkbox.style.backgroundColor = '#d1d4d7';
    }
  }
  // toggle between light and dark mode
  $('#darkModeSwitch').click(() => {
    const html = document.querySelector('html')
    const currentTheme = html.getAttribute('data-bs-theme')
    const newTheme = currentTheme === 'light' ? 'dark' : 'light'
    const checkbox = document.querySelector('#darkModeSwitch');

    html.setAttribute('data-bs-theme', newTheme)
    $('body').removeClass('light dark').addClass(newTheme)
    // toggle button icon
    $('.moon-icon').toggle()
    $('.sun-icon').toggle()

    localStorage.setItem('theme', newTheme)
    console.log(newTheme)

    if (newTheme === 'dark') {
      checkbox.style.backgroundColor = 'black';
    } else {
    checkbox.style.backgroundColor = '#d1d4d7';
    }

  })
</script>

